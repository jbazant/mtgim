// Generated by CoffeeScript 1.7.1
(function() {
  var contactFormInit, fbPageInit, searchPageInit;

  fbPageInit = function() {
    var err;
    try {
      FB.XFBML.parse();
    } catch (_error) {
      err = _error;
    }
  };

  contactFormInit = function() {
    $('#page-contact #contactform .anti_spam_holder').hide().find('#anti_spam_check').val('Anti-spam check');
  };

  searchPageInit = function(page) {
    var form, tabResults;
    form = $('#searchform', page);
    $('#searchResults', page).tabs({
      'active': 0,
      'show': {
        'effect': 'fadeIn',
        'duration': 'fast'
      },
      'hide': {
        'effect': 'fadeOut',
        'duration': 'fast'
      }
    });
    tabResults = [];
    $('.result-holder').each(function() {
      return tabResults.push(new SearchResult(this, form));
    });
    tabResults[0].setActive();
    $('#searchResults', page).on('tabsactivate', function(e, ui) {
      if (ui.oldTab) {
        tabResults[ui.oldTab.index()].resetActive();
      }
      if (ui.newTab) {
        tabResults[ui.newTab.index()].setActive();
      }
    });
    form.on('submit', function() {
      $('#cardname').blur();
      $('#searchResults').focus();
    });
  };

  $(document).bind('pageshow', function() {
    var page;
    fbPageInit();
    page = $.mobile.activePage;
    switch (page.attr('id')) {
      case 'page-search':
        searchPageInit(page);
        break;
      case 'page-contact':
        contactFormInit(page);
    }
  });

}).call(this);
