// Generated by CoffeeScript 1.7.1
(function() {
  var contactFormInit, fbPageInit, searchFormCallback;

  fbPageInit = function() {
    var err;
    try {
      return FB.XFBML.parse();
    } catch (_error) {
      err = _error;
    }
  };

  contactFormInit = function(page) {
    return $('#contactform .anti_spam_holder', page).hide().find('#anti_spam_check').val('Anti-spam check');
  };

  searchFormCallback = function(e) {
    var cardname;
    e.preventDefault();
    cardname = $('#cardname', this).val();
    $.mobile.changePage(jsParams.baseUrl + '/index/search/card/' + encodeURIComponent(cardname));
  };

  window.pageShowCallback = function() {
    var page, pageActions, pageId;
    page = $.mobile.activePage;
    pageId = page.attr('id');
    if (pageId !== 'page-search') {
      $('#searchform', page).on('submit', searchFormCallback);
    }
    pageActions = {
      'page-search': function() {
        var currentPage;
        return currentPage = new SearchPage(page, activityTracker);
      },
      'page-contact': function() {
        return contactFormInit(page);
      },
      'page-index': function() {
        var c;
        c = $('#cardname', page).focus();
        return $('#cookies-agree', page).on('click', function() {
          return window.activityTracker.trackEvent('IndexPage', 'cookies-agree', 'click');
        });
      },
      'page-test': function() {
        return contactFormInit(page);
      }
    };
    fbPageInit();
    if (pageActions[pageId] != null) {
      pageActions[pageId]();
    }
  };

}).call(this);

//# sourceMappingURL=app.map
