// Generated by CoffeeScript 1.8.0
(function() {
  var contactFormInit, fbPageInit, searchFormCallback;

  fbPageInit = function() {
    var err;
    try {
      return FB.XFBML.parse();
    } catch (_error) {
      err = _error;
    }
  };

  contactFormInit = function(page) {
    return $('#contactform .anti_spam_holder', page).hide().find('#anti_spam_check').val('Anti-spam check');
  };

  searchFormCallback = function(e) {
    var cardname;
    e.preventDefault();
    cardname = $('#cardname', this).val();
    $.mobile.changePage(jsParams.baseUrl + '/index/search/card/' + encodeURIComponent(cardname));
  };

  window.pageShowCallback = function() {
    var page, pageActions, pageId;
    page = $.mobile.activePage;
    pageId = page.attr('id');
    pageActions = {
      'page-search': function() {
        var currentPage;
        currentPage = new SearchPage(page, activityTracker);
      },
      'page-contact': function() {
        contactFormInit(page);
      },
      'page-index': function() {
        var currentPage;
        currentPage = new IndexPage(page, activityTracker);
      },
      'page-test': function() {
        contactFormInit(page);
      }
    };
    fbPageInit();
    if (pageId !== 'page-search') {
      $('#searchform', page).on('submit', searchFormCallback);
    }
    if (pageActions[pageId] != null) {
      pageActions[pageId]();
    }
  };

}).call(this);
